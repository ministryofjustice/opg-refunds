!function(o){"use strict";function t(t,e){this.trackerDomains=[],"string"==typeof e&&(e={cookieDomain:e}),c("create",t,e),c("set","anonymizeIp",!0),c("set","displayFeaturesTask",null)}var s=o.jQuery,e=o.GOVUK||{};function c(){"function"==typeof o.ga&&o.ga.apply(o,arguments)}t.load=function(){var t,e,n,i,r,a;t=o,e=document,n="script",i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,r=e.createElement(n),a=e.getElementsByTagName(n)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(r,a)},t.prototype.trackPageview=function(t,e,n){var i;if("string"==typeof t&&(i={page:t}),"string"==typeof e&&((i=i||{}).title=e),"object"==typeof n&&(i=s.extend(i||{},n)),s.isEmptyObject(i)){c("send","pageview");for(r=0,a=this.trackerDomains.length;r<a;r++){c(this.trackerDomains[r]+".send","pageview")}}else{c("send","pageview",i);for(var r=0,a=this.trackerDomains.length;r<a;r++){c(this.trackerDomains[r]+".send","pageview",i)}}},t.prototype.trackEvent=function(t,e,n){var i,r={hitType:"event",eventCategory:t,eventAction:e};"string"==typeof(n=n||{}).label&&(r.eventLabel=n.label,delete n.label),!n.value&&0!==n.value||("number"!=typeof(i=parseInt(n.value,10))||isNaN(i)||(n.eventValue=i),delete n.value),n.nonInteraction&&(n.nonInteraction=1),"object"==typeof n&&s.extend(r,n),c("send",r)},t.prototype.trackSocial=function(t,e,n,i){var r={hitType:"social",socialNetwork:t,socialAction:e,socialTarget:n};s.extend(r,i),c("send",r)},t.prototype.addLinkedTrackerDomain=function(t,e,n){this.trackerDomains.push([e]),c("create",{trackingId:t,cookieDomain:"auto",name:e,allowLinker:!0}),c(e+".require","linker"),c(e+".linker:autoLink",n=Array.isArray(n)?n:[n]),c(e+".set","anonymizeIp",!0),c(e+".set","displayFeaturesTask",null)},t.prototype.setDimension=function(t,e){c("set","dimension"+t,String(e))},e.GoogleAnalyticsUniversalTracker=t,o.GOVUK=e}(window),function(a){"use strict";function t(t){this.gifUrl=t,this.dimensions=[]}var o=a.jQuery,e=a.GOVUK||{};t.load=function(){},t.prototype.trackPageview=function(t,e,n){var i;"string"==typeof t&&(i={page:t}),"string"==typeof e&&((i=i||{}).title=e),"object"==typeof n&&(i=o.extend(i||{},n)),o.isEmptyObject(i)?this.sendToTracker("pageview"):this.sendToTracker("pageview",i)},t.prototype.trackEvent=function(t,e,n){var i={eventCategory:t,eventAction:e};(n=n||{}).label&&(i.eventLabel=n.label,delete n.label),n.value&&(i.eventValue=n.value.toString(),delete n.value),"object"==typeof n&&o.extend(i,n),this.sendToTracker("event",i)},t.prototype.trackSocial=function(t,e,n,i){var r={socialNetwork:t,socialAction:e,socialTarget:n};o.extend(r,i),this.sendToTracker("social",r)},t.prototype.addLinkedTrackerDomain=function(){},t.prototype.setDimension=function(t,e){this.dimensions["dimension"+t]=e},t.prototype.payloadParams=function(t,e){var n=o.extend({},e,this.dimensions,{eventType:t,referrer:a.document.referrer,gaClientId:this.gaClientId,windowWidth:a.innerWidth,windowHeight:a.innerHeight,screenWidth:a.screen.width,screenHeight:a.screen.height,colorDepth:a.screen.colorDepth});if(a.performance)for(var i in n.navigationType=a.performance.navigation.type.toString(),n.redirectCount=a.performance.navigation.redirectCount.toString(),a.performance.timing){var r=a.performance.timing[i];"string"!=typeof r&&"number"!=typeof r||(n["timing_"+i]=r.toString())}return n},t.prototype.sendData=function(t){var e=this.gifUrl+"?"+o.param(t);o.get(e)},t.prototype.sendToTracker=function(e,n){o(a.document).ready(function(){a.ga?a.ga(function(t){this.gaClientId=t.get("clientId"),this.sendData(this.payloadParams(e,n))}.bind(this)):this.sendData(this.payloadParams(e,n))}.bind(this))},e.GOVUKTracker=t,a.GOVUK=e}(window),function(n){"use strict";function i(t){if(this.stripDatePII=!1,void 0!==t.stripDatePII&&(this.stripDatePII=!0===t.stripDatePII,delete t.stripDatePII),this.stripPostcodePII=!1,void 0!==t.stripPostcodePII&&(this.stripPostcodePII=!0===t.stripPostcodePII,delete t.stripPostcodePII),this.trackers=[],void 0!==t.universalId){var e=t.universalId;delete t.universalId,this.trackers.push(new r.GoogleAnalyticsUniversalTracker(e,t))}if(void 0!==t.govukTrackerUrl){var n=t.govukTrackerUrl;delete t.govukTrackerUrl,this.trackers.push(new r.GOVUKTracker(n))}}var r=n.GOVUK||{},a=/[^\s=/?&]+(?:@|%40)[^\s=/?&]+/g,o=/[A-PR-UWYZ][A-HJ-Z]?[0-9][0-9A-HJKMNPR-Y]?(?:[\s+]|%20)*[0-9][ABD-HJLNPQ-Z]{2}/gi,s=/\d{4}(-?)\d{2}(-?)\d{2}/g;i.PIISafe=function(t){this.value=t},i.prototype.stripPII=function(t){return"string"==typeof t?this.stripPIIFromString(t):"[object Array]"===Object.prototype.toString.call(t)||"[object Arguments]"===Object.prototype.toString.call(t)?this.stripPIIFromArray(t):"object"==typeof t?this.stripPIIFromObject(t):t},i.prototype.stripPIIFromString=function(t){var e=t.replace(a,"[email]");return!0===this.stripDatePII&&(e=e.replace(s,"[date]")),!0===this.stripPostcodePII&&(e=e.replace(o,"[postcode]")),e},i.prototype.stripPIIFromObject=function(t){if(t instanceof i.PIISafe)return t.value;for(var e in t){var n=t[e];t[e]=this.stripPII(n)}return t},i.prototype.stripPIIFromArray=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];t[e]=this.stripPII(i)}return t},i.prototype.sendToTrackers=function(t,e){for(var n=0,i=this.trackers.length;n<i;n++){var r=this.trackers[n],a=r[t];"function"==typeof a&&a.apply(r,e)}},i.load=function(){r.GoogleAnalyticsUniversalTracker.load(),r.GOVUKTracker.load()},i.prototype.defaultPathForTrackPageview=function(t){return this.stripPIIFromString(t.href.substring(t.origin.length).split("#")[0])},i.prototype.trackPageview=function(t,e,n){arguments[0]=arguments[0]||this.defaultPathForTrackPageview(window.location),0===arguments.length&&(arguments.length=1),this.sendToTrackers("trackPageview",this.stripPII(arguments))},i.prototype.trackEvent=function(t,e,n){this.sendToTrackers("trackEvent",this.stripPII(arguments))},i.prototype.trackShare=function(t,e){this.sendToTrackers("trackSocial",this.stripPII([t,"share",n.location.pathname,e]))},i.prototype.setDimension=function(t,e){this.sendToTrackers("setDimension",this.stripPII(arguments))},i.prototype.addLinkedTrackerDomain=function(t,e,n){this.sendToTrackers("addLinkedTrackerDomain",arguments)},r.Analytics=i,n.GOVUK=r}(window),function(t){"use strict";var s=t.jQuery,c=t.GOVUK||{};c.analyticsPlugins=c.analyticsPlugins||{},c.analyticsPlugins.externalLinkTracker=function(t){var o=(t=t||{}).externalLinkUploadCustomDimension,e='a[href^="http"]:not(a[href*="'+c.analyticsPlugins.externalLinkTracker.getHostname()+'"])';s("body").on("click",e,function(t){var e=function(t){var e=s(t.target);e.is("a")||(e=e.parents("a"));return e}(t),n={transport:"beacon"},i=e.attr("href"),r=s.trim(e.text());r&&(n.label=r);if(void 0!==o){var a=i;c.analytics.setDimension(o,a)}c.analytics.trackEvent("External Link Clicked",i,n)})},c.analyticsPlugins.externalLinkTracker.getHostname=function(){return t.location.hostname},t.GOVUK=c}(window),function(t){"use strict";var s=t.jQuery,o=t.GOVUK||{};o.analyticsPlugins=o.analyticsPlugins||{},o.analyticsPlugins.formErrorTracker=function(){for(var t=s(".error-summary-list li a"),e=0;e<t.length;e++)n(t[e]);function n(t){var e=s(t),n=s.trim(e.text()),i=e.attr("href"),r=function(t){var e,n,i=s(t).attr("href"),r=s(i),a=(r.is("legend"),r.is("input"),r.prop("id")),o=document.getElementById(a).nodeName.toLowerCase();"input"===o?(e=s.trim(s('label[for="'+a+'"] .question-text').text()),n=s.trim(r.closest("fieldset").find("legend").text()),e=0<n.length?n+": "+e:e):"legend"===o&&(e=s.trim(r.find(".question-text").text()));return e}(t),a={transport:"beacon",label:i+" - "+n};window.optionsGlobal=a,o.analytics.trackEvent("Error-field",r,a)}},t.GOVUK=o}(window),GOVUK.analyticsSetup=function(t){"use strict";t.jQuery;var e=t.GOVUK||{},n=t.gaConfig||{};e.Analytics.load();var i="powerofattorneyrefund.service.justice.gov.uk"===document.domain?".powerofattorneyrefund.service.justice.gov.uk":document.domain;e.analytics=new e.Analytics({universalId:n.universalId||"",cookieDomain:i,allowLinker:!0,allowAnchor:!0,stripPostcodePII:!0,stripDatePII:!0}),void 0!==n.sessionId&&e.analytics.setDimension(n.dimensions.ANONYMOUS_SESSION_ID,n.sessionId),void 0!==n.releaseTag&&e.analytics.setDimension(n.dimensions.RELEASE_TAG,n.releaseTag),"powerofattorneyrefund.service.justice.gov.uk"===document.domain&&e.analytics.addLinkedTrackerDomain(n.govId,"govuk_shared",["www.gov.uk"]),e.analyticsPlugins.formErrorTracker(),e.analyticsPlugins.externalLinkTracker(),void 0!==e.pageviewOptions?e.analytics.trackPageview(null,null,e.pageviewOptions):e.analytics.trackPageview()},GOVUK.analyticsSetup(window);
//# sourceMappingURL=custom-analytics.js.map
