{"version":3,"sources":["details.polyfill.js","back-link.js","application.js"],"names":["addEvent","node","type","callback","addEventListener","e","target","attachEvent","srcElement","charCode","which","keyCode","preventDefault","returnValue","addClickEvent","KEY_ENTER","KEY_SPACE","nodeName","toLowerCase","click","getAncestor","match","parentNode","addDetailsPolyfill","list","statechange","summary","expanded","__details","__summary","getAttribute","hidden","__content","setAttribute","NATIVE_DETAILS","style","display","removeAttribute","__twisty","firstChild","nodeValue","started","document","getElementsByTagName","length","n","i","details","item","id","tabIndex","openAttr","twisty","createElement","className","appendChild","createTextNode","insertBefore","open","window","global","BackLink","elm","this","$header","$","setup","bindEvents","prototype","$link","before","removeClass","on","console","log","root","history","back","GOVUK","ready","jQuery","fx","off","each","idx","ShowHideContent","init"],"mappings":"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","file":"app.js","sourcesContent":["// <details> polyfill\n// http://caniuse.com/#feat=details\n\n// FF Support for HTML5's <details> and <summary>\n// https://bugzilla.mozilla.org/show_bug.cgi?id=591737\n\n// http://www.sitepoint.com/fixing-the-details-element/\n\n;(function () {\n  'use strict'\n\n  var NATIVE_DETAILS = typeof document.createElement('details').open === 'boolean'\n  var KEY_ENTER = 13\n  var KEY_SPACE = 32\n\n  // Add event construct for modern browsers or IE\n  // which fires the callback with a pre-converted target reference\n  function addEvent (node, type, callback) {\n    if (node.addEventListener) {\n      node.addEventListener(type, function (e) {\n        callback(e, e.target)\n      }, false)\n    } else if (node.attachEvent) {\n      node.attachEvent('on' + type, function (e) {\n        callback(e, e.srcElement)\n      })\n    }\n  }\n\n  // Cross-browser character code / key pressed\n  function charCode (e) {\n    return (typeof e.which === 'number') ? e.which : e.keyCode\n  }\n\n  // Cross-browser preventing default action\n  function preventDefault (e) {\n    if (e.preventDefault) {\n      e.preventDefault()\n    } else {\n      e.returnValue = false\n    }\n  }\n\n  // Handle cross-modal click events\n  function addClickEvent (node, callback) {\n    addEvent(node, 'keypress', function (e, target) {\n      // When the key gets pressed - check if it is enter or space\n      if (charCode(e) === KEY_ENTER || charCode(e) === KEY_SPACE) {\n        if (target.nodeName.toLowerCase() === 'summary') {\n          // Prevent space from scrolling the page\n          // and enter from submitting a form\n          preventDefault(e)\n          // Click to let the click event do all the necessary action\n          if (target.click) {\n            target.click()\n          } else {\n            // except Safari 5.1 and under don't support .click() here\n            callback(e, target)\n          }\n        }\n      }\n    })\n\n    // Prevent keyup to prevent clicking twice in Firefox when using space key\n    addEvent(node, 'keyup', function (e, target) {\n      if (charCode(e) === KEY_SPACE) {\n        if (target.nodeName === 'SUMMARY') {\n          preventDefault(e)\n        }\n      }\n    })\n\n    addEvent(node, 'click', function (e, target) {\n      callback(e, target)\n    })\n  }\n\n  // Get the nearest ancestor element of a node that matches a given tag name\n  function getAncestor (node, match) {\n    do {\n      if (!node || node.nodeName.toLowerCase() === match) {\n        break\n      }\n      node = node.parentNode\n    } while (node)\n\n    return node\n  }\n\n  // Create a started flag so we can prevent the initialisation\n  // function firing from both DOMContentLoaded and window.onload\n  var started = false\n\n  // Initialisation function\n  function addDetailsPolyfill (list) {\n    // If this has already happened, just return\n    // else set the flag so it doesn't happen again\n    if (started) {\n      return\n    }\n    started = true\n\n    // Get the collection of details elements, but if that's empty\n    // then we don't need to bother with the rest of the scripting\n    if ((list = document.getElementsByTagName('details')).length === 0) {\n      return\n    }\n\n    // else iterate through them to apply their initial state\n    var n = list.length\n    var i = 0\n    for (i; i < n; i++) {\n      var details = list[i]\n\n      // Save shortcuts to the inner summary and content elements\n      details.__summary = details.getElementsByTagName('summary').item(0)\n      details.__content = details.getElementsByTagName('div').item(0)\n\n      if (!details.__summary || !details.__content) {\n        return\n      }\n\n      // If the content doesn't have an ID, assign it one now\n      // which we'll need for the summary's aria-controls assignment\n      if (!details.__content.id) {\n        details.__content.id = 'details-content-' + i\n      }\n\n      // Add ARIA role=\"group\" to details\n      details.setAttribute('role', 'group')\n\n      // Add role=button to summary\n      details.__summary.setAttribute('role', 'button')\n\n      // Add aria-controls\n      details.__summary.setAttribute('aria-controls', details.__content.id)\n\n      // Set tabIndex so the summary is keyboard accessible for non-native elements\n      // http://www.saliences.com/browserBugs/tabIndex.html\n      if (!NATIVE_DETAILS) {\n        details.__summary.tabIndex = 0\n      }\n\n      // Detect initial open state\n      var openAttr = details.getAttribute('open') !== null\n      if (openAttr === true) {\n        details.__summary.setAttribute('aria-expanded', 'true')\n        details.__content.setAttribute('aria-hidden', 'false')\n      } else {\n        details.__summary.setAttribute('aria-expanded', 'false')\n        details.__content.setAttribute('aria-hidden', 'true')\n        if (!NATIVE_DETAILS) {\n          details.__content.style.display = 'none'\n        }\n      }\n\n      // Create a circular reference from the summary back to its\n      // parent details element, for convenience in the click handler\n      details.__summary.__details = details\n\n      // If this is not a native implementation, create an arrow\n      // inside the summary\n      if (!NATIVE_DETAILS) {\n        var twisty = document.createElement('i')\n\n        if (openAttr === true) {\n          twisty.className = 'arrow arrow-open'\n          twisty.appendChild(document.createTextNode('\\u25bc'))\n        } else {\n          twisty.className = 'arrow arrow-closed'\n          twisty.appendChild(document.createTextNode('\\u25ba'))\n        }\n\n        details.__summary.__twisty = details.__summary.insertBefore(twisty, details.__summary.firstChild)\n        details.__summary.__twisty.setAttribute('aria-hidden', 'true')\n      }\n    }\n\n    // Define a statechange function that updates aria-expanded and style.display\n    // Also update the arrow position\n    function statechange (summary) {\n      var expanded = summary.__details.__summary.getAttribute('aria-expanded') === 'true'\n      var hidden = summary.__details.__content.getAttribute('aria-hidden') === 'true'\n\n      summary.__details.__summary.setAttribute('aria-expanded', (expanded ? 'false' : 'true'))\n      summary.__details.__content.setAttribute('aria-hidden', (hidden ? 'false' : 'true'))\n\n      if (!NATIVE_DETAILS) {\n        summary.__details.__content.style.display = (expanded ? 'none' : '')\n\n        var hasOpenAttr = summary.__details.getAttribute('open') !== null\n        if (!hasOpenAttr) {\n          summary.__details.setAttribute('open', 'open')\n        } else {\n          summary.__details.removeAttribute('open')\n        }\n      }\n\n      if (summary.__twisty) {\n        summary.__twisty.firstChild.nodeValue = (expanded ? '\\u25ba' : '\\u25bc')\n        summary.__twisty.setAttribute('class', (expanded ? 'arrow arrow-closed' : 'arrow arrow-open'))\n      }\n\n      return true\n    }\n\n    // Bind a click event to handle summary elements\n    addClickEvent(document, function (e, summary) {\n      if (!(summary = getAncestor(summary, 'summary'))) {\n        return true\n      }\n      return statechange(summary)\n    })\n  }\n\n  // Bind two load events for modern and older browsers\n  // If the first one fires it will set a flag to block the second one\n  // but if it's not supported then the second one will fire\n  addEvent(document, 'DOMContentLoaded', addDetailsPolyfill)\n  addEvent(window, 'load', addDetailsPolyfill)\n})()",";(function (global) {\n  'use strict'\n\n  var BackLink = function (elm) {\n    if (elm) {\n      this.$header = $(elm);\n      this.setup();\n      this.bindEvents();\n    }\n  };\n\n  BackLink.prototype.setup = function () {\n    this.$link = $(\n                  '<a class=\"link-back\" href=\"#\">' +\n                    'Back' +\n                    ' <span class=\"visuallyhidden\"> ' +\n                      'to the previous question' +\n                    '</span>' +\n                  '</a>'\n                );\n    this.$header.before(this.$link);\n    this.$header.removeClass('no-back-link');\n  };\n\n  BackLink.prototype.bindEvents = function () {\n    this.$link.on(\"click\", function(e) {\n      e.preventDefault();\n      console.log(\"BACK\");\n      root.history.back();\n      return false;\n    });\n  };\n\n  GOVUK.BackLink = BackLink\n  global.GOVUK = GOVUK\n})(window)","$(document).ready(function () {\n  // Turn off jQuery animation\n  jQuery.fx.off = true\n\n  $('h1.no-back-link').each(function (idx, elm) {\n    new GOVUK.BackLink(elm);\n  });\n\n  // Where .multiple-choice uses the data-target attribute\n  // to toggle hidden content\n  var showHideContent = new GOVUK.ShowHideContent()\n  showHideContent.init()\n})"]}