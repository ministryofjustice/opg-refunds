<?php 
$title = 'Your contact details';
$this->layout('layout::standard',
[
    'title' => $title
]);

$this->addErrorMap([
    'contact-options' => [
        'required' => [
            'summary'   => 'You must choose a way to be contacted',
            'field'     => 'Choose how we contact you'
        ]
    ],
    'email' => [
        'required' => [
            'summary'   => 'You haven\'t given your email address',
            'field'     => 'Enter your email address'
        ],
        'email-invalid' => [
            'summary'   => 'Check your email address',
            'field'     => 'Enter a valid email address'
        ],
        // If the hostname was invalid, so was the email address.
        // Thus there's no need to output the hostname validation
        'hostname-invalid' => [
            'summary'   => '',
            'field'     => ''
        ],
    ],
    'phone' => [
        'required' => [
            'summary'   => 'You haven\'t given your phone number',
            'field'     => 'Enter your phone number'
        ],
        'phone-invalid' => [
            'summary'   => 'Check your phone number',
            'field'     => 'Enter a valid phone number'
        ]
    ]
]);
?>

<?php $this->insert('snippet::error-summary', [ 'form'=>$form ]) ?>

<p>We will use these details to:</p>

<ul class="list list-bullet">
    <li>send email or text message updates - if a refund is approved, for example</li>
    <li>contact you if we need more information</li> 
</ul>

<form action="" method="post" class="form">

    <?php $this->insert('snippet::form-csrf', [ 'form'=>$form ]) ?>
    
    <div class="form-group">
        <fieldset>

            <legend>
                <h1 class="heading-medium">
                What are your contact details?
                </h1>
                <span class="body-text">Select all options that are relevant to you.</span>
            </legend>

            <?php $this->insert('snippet::input-checkboxes', [
                'formElement' => $form->get('contact-options'),
                'question' => 'What are your contact details? Select all options that are relevant to you.',
                'options' => [
                    'email' => [
                        'optionLabel' => "Email address",
                        'dataTargetMarkup' => $this->fetch('snippet::input-text', [
                            'formElement' => $form->get('email'),
                            'formLabel' => 'Email address',
                            'formType' => 'text',
                            'formLabelBold' => true
                        ])
                    ],
                    'phone' => [
                        'optionLabel' => "Phone number",
                        'dataTargetMarkup' => $this->fetch('snippet::input-text', [
                            'formElement' => $form->get('phone'),
                            'formLabel' => 'Phone number (mobile or landline)',
                            'formType' => 'text',
                            'formLabelBold' => true
                        ])
                    ]
                ],
            ])
            ?>

        </fieldset>
    </div>

    <div class="form-group">
        <input type="submit" class="button" value="Continue">
    </div>

</form>