<?php $this->layout('layout::default') ?>

<div class="grid-row">
    <div class="column-two-thirds">

        <h1 class="heading-xlarge">
            Check your refund claim
        </h1>

        <h2 class="heading-medium">Donor details</h2>

        <dl class="govuk-check-your-answers cya-questions-short">
            
            <?php $this->insert('snippet::check-your-details-item', [
                'question' => 'Date of birth',
                'answer' => "{$details['donor']['name']['title']} {$details['donor']['name']['first']} {$details['donor']['name']['last']}",
                'changeURL' => $this->url('apply.donor', ['who'=>$who])
            ]) ?>
            
            <?php $this->insert('snippet::check-your-details-item', [
                'question' => 'Name',
                'answer' => $details['donor']['dob'],
                'changeURL' => $this->url('apply.donor', ['who'=>$who])
            ]) ?>

        </dl>

        <?php if ($who === 'attorney'): ?>
            <h2 class="heading-medium">Attorney details</h2>

            <dl class="govuk-check-your-answers cya-questions-short">
                
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Name',
                    'answer' => "{$details['attorney']['name']['title']} {$details['attorney']['name']['first']} {$details['attorney']['name']['last']}",
                    'changeURL' => $this->url('apply.attorney', ['who'=>$who])
                ]) ?>
                
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Date of birth',
                    'answer' => $details['attorney']['dob'],
                    'changeURL' => $this->url('apply.attorney', ['who'=>$who])
                ]) ?>
        
            </dl>
        <?php endif ?>

        <h2 class="heading-medium">Power of attorney details</h2>

        <dl class="govuk-check-your-answers cya-questions-short">
            
            <?php if (isset($details['verification']['case-number']) && $details['verification']['case-number']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Case number',
                    'answer' => $details['verification']['case-number'],
                    'changeURL' => $this->url('apply.verification', ['who'=>$who])
                ]) ?>
            <?php endif ?>

            <?php if (isset($details['verification']['donor-postcode']) && $details['verification']['donor-postcode']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Donor postcode',
                    'answer' => $details['verification']['donor-postcode'],
                    'changeURL' => $this->url('apply.verification', ['who'=>$who])
                ]) ?>
            <?php endif ?>

            <?php if (isset($details['verification']['attorney-name']) && $details['verification']['attorney-name']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Attorney name',
                    'answer' => $details['verification']['attorney-name'],
                    'changeURL' => $this->url('apply.verification', ['who'=>$who])
                ]) ?>
            <?php endif ?>

            <?php if (isset($details['verification']['attorney-postcode']) && $details['verification']['attorney-postcode']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Attorney postcode',
                    'answer' => $details['verification']['attorney-postcode'],
                    'changeURL' => $this->url('apply.verification', ['who'=>$who])
                ]) ?>
            <?php endif ?>

        </dl>

        <h2 class="heading-medium">Get updates</h2>

        <dl class="govuk-check-your-answers cya-questions-short">
            
            <?php if (isset($details['contact']['email']) && $details['contact']['email']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Email',
                    'answer' => $details['contact']['email'],
                    'changeURL' => $this->url('apply.contact', ['who'=>$who])
                ]) ?>
            <?php endif ?>
            
            <?php if (isset($details['contact']['mobile']) && $details['contact']['mobile']): ?>
                <?php $this->insert('snippet::check-your-details-item', [
                    'question' => 'Mobile phone number',
                    'answer' => $details['contact']['mobile'],
                    'changeURL' => $this->url('apply.contact', ['who'=>$who])
                ]) ?>
            <?php endif ?>

        </dl>

        <a class="button" href="<?= $this->url('apply.account', ['who'=>$who]) ?>">Continue</a>
        
    </div>
</div>
